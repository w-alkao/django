{% extends 'reviews/base.html' %}

{% block title %}
  {% if form.is_valid and search_text %}
    Search Results for {{ search_text }}
  {% else %}
    Book Review
  {% endif %}
{% endblock %}

{% block content %}
  <h2>Search for Books</h2>
  <form>
    <table>
      {{ form.as_table }}
    </table>
    <br>
    <p>
      <button class="btn btn-primary" type="submit" name="button_element" value="Button Element">
        <strong>Submit</strong>
      </button>
    </p>
  </form>

  {% if form.is_valid and search_text %}
    <h3>Search results for <em>{{ search_text }}</em></h3>
    {% if not book_list %}
      <p>No results found</p>
    {% else %}
      <ul class="list-group">
        {% for item in book_list %}
        <li class="list-group-item">
          <span class="text-info">Title: </span><span><a href="/books/{{ item.book.id }}/">{{ item.book.title }}</a></span>
          <br>
          <span class="text-info">Contributors: </span>
          <span>
            {% for itm in item.contributors %}
              {{ itm.first_names }} {{ itm.last_names }},
            {% endfor %}
          </span>
        </li>
        {% endfor %}
      </ul>
    {% endif %}
  {% endif %}

{% endblock %}